---
layout: default
title: "Obsidian to Blog Sync"
date: 2024-01-15 12:00:00 +0800
categories:
---

# Obsidian to Blog Sync

è¿™ä¸ªä»“åº“åŒ…å«ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„GitHub Actionå·¥ä½œæµï¼Œå¯ä»¥å°†Obsidianä¸­å¸¦æœ‰ç‰¹å®šæ ‡ç­¾çš„Markdownæ–‡ä»¶è‡ªåŠ¨åŒæ­¥åˆ°Jekyllåšå®¢ã€‚

## é¡¹ç›®çŠ¶æ€

âœ… **åŠŸèƒ½å®Œæ•´** - æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®ç°å¹¶æµ‹è¯•é€šè¿‡
âœ… **Gité€»è¾‘ä¿®å¤** - å·²ä¿®å¤æ–‡ä»¶åŒæ­¥ä¸­çš„Gitå˜åŒ–æ£€æµ‹é—®é¢˜
âœ… **å›¾ç‰‡å¤„ç†** - æ”¯æŒObsidian wikié“¾æ¥å’Œæ ‡å‡†Markdownå›¾ç‰‡æ ¼å¼è½¬æ¢
âœ… **è‡ªåŠ¨åŒ–æµ‹è¯•** - é€šè¿‡å®é™…åšå®¢æ–‡ç« åŒæ­¥éªŒè¯åŠŸèƒ½æ­£å¸¸

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” è‡ªåŠ¨æ£€æµ‹å¸¦æœ‰ `` æ ‡ç­¾çš„Markdownæ–‡ä»¶
- ğŸ“ æ™ºèƒ½æå–æ–‡ç« æ ‡é¢˜å’Œæ—¥æœŸä¿¡æ¯
- ğŸ”„ è‡ªåŠ¨è½¬æ¢ä¸ºJekyllå…¼å®¹çš„æ ¼å¼
- ğŸ–¼ï¸ è‡ªåŠ¨å¤„ç†å›¾ç‰‡å¼•ç”¨ï¼Œè½¬æ¢Obsidianæ ¼å¼åˆ°Jekyllæ ¼å¼
- ğŸ“ è‡ªåŠ¨å¤åˆ¶å¼•ç”¨çš„å›¾ç‰‡æ–‡ä»¶åˆ°åšå®¢ä»“åº“
- ğŸ“ ä¿æŒObsidianåŸæœ‰æ–‡ä»¶ç»“æ„ä¸å˜
- ğŸš€ è‡ªåŠ¨æ¨é€åˆ°åšå®¢ä»“åº“

## è®¾ç½®è¯´æ˜

### 1. é…ç½®GitHub Secrets

#### åˆ›å»ºPersonal Access Token

1. è®¿é—® GitHub Settings > Developer settings > Personal access tokens > Tokens (classic)
2. ç‚¹å‡» `Generate new token (classic)`
3. è®¾ç½®tokenåç§°ï¼Œå¦‚ï¼š`Blog Repo Access`
4. é€‰æ‹©è¿‡æœŸæ—¶é—´ï¼ˆå»ºè®®é€‰æ‹©è¾ƒé•¿æ—¶é—´æˆ–æ— è¿‡æœŸæ—¶é—´ï¼‰
5. å‹¾é€‰ä»¥ä¸‹æƒé™ï¼š
   - `repo` (å®Œæ•´ä»“åº“è®¿é—®æƒé™)
   - `workflow` (å·¥ä½œæµæƒé™)
6. ç‚¹å‡» `Generate token` å¹¶å¤åˆ¶ç”Ÿæˆçš„token

#### é…ç½®Repository Secret

1. è¿›å…¥ä½ çš„Obsidianä»“åº“çš„ `Settings` > `Secrets and variables` > `Actions`
2. ç‚¹å‡» `New repository secret`
3. æ·»åŠ ä»¥ä¸‹secretï¼š
   - **Name**: `BLOG_REPO_TOKEN`
   - **Secret**: ç²˜è´´ä¸Šä¸€æ­¥ç”Ÿæˆçš„Personal Access Token
4. ç‚¹å‡» `Add secret`

### 2. å·¥ä½œæµè§¦å‘æ¡ä»¶

å·¥ä½œæµä¼šåœ¨ä»¥ä¸‹æƒ…å†µä¸‹è‡ªåŠ¨è§¦å‘ï¼š
- æ¨é€åˆ° `main` æˆ– `master` åˆ†æ”¯
- åˆ›å»ºPull Requeståˆ° `main` æˆ– `master` åˆ†æ”¯
- ä¿®æ”¹çš„æ–‡ä»¶åŒ…å« `.md` æ–‡ä»¶

### 3. ä½¿ç”¨æ–¹æ³•

1. åœ¨Obsidianä¸­çš„ä»»æ„Markdownæ–‡ä»¶ä¸­æ·»åŠ  `` æ ‡ç­¾
2. æäº¤å¹¶æ¨é€åˆ°GitHub
3. GitHub Actionä¼šè‡ªåŠ¨ï¼š
   - æ£€æµ‹å¸¦æœ‰æ ‡ç­¾çš„æ–‡ä»¶
   - æå–æ ‡é¢˜å’Œæ—¥æœŸä¿¡æ¯
   - è½¬æ¢ä¸ºJekyllæ ¼å¼
   - å¤åˆ¶åˆ°åšå®¢ä»“åº“çš„ `_posts` ç›®å½•
   - è‡ªåŠ¨æäº¤å’Œæ¨é€

## æ–‡ä»¶å¤„ç†è§„åˆ™

### æ ‡é¢˜æå–
- ä¼˜å…ˆä½¿ç”¨æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ª `# æ ‡é¢˜`
- å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œä½¿ç”¨YAML front matterä¸­çš„title
- æœ€åä½¿ç”¨æ–‡ä»¶åä½œä¸ºæ ‡é¢˜

### æ—¥æœŸå¤„ç†
- ä¼˜å…ˆä½¿ç”¨YAML front matterä¸­çš„dateå­—æ®µ
- å°è¯•ä»æ–‡ä»¶åä¸­æå–æ—¥æœŸï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰
- é»˜è®¤ä½¿ç”¨å½“å‰æ—¥æœŸ

### æ–‡ä»¶åç”Ÿæˆ
- æ ¼å¼ï¼š`YYYY-MM-DD-æ ‡é¢˜.md`
- è‡ªåŠ¨æ¸…ç†ç‰¹æ®Šå­—ç¬¦ï¼Œè½¬æ¢ç©ºæ ¼ä¸ºè¿å­—ç¬¦
- æ”¯æŒä¸­æ–‡æ ‡é¢˜

### å›¾ç‰‡å¤„ç†
- **Obsidianæ ¼å¼è½¬æ¢**ï¼š`![image.png](/assets/images/posts/2024/2024-01-15-obsidian-to-blog-sync/2024-01-15-obsidian-to-blog-sync_001.png)` â†’ `![image.png](/assets/images/posts/image.png)`
- **ç›¸å¯¹è·¯å¾„è½¬æ¢**ï¼š`![alt](/assets/images/posts/2024/2024-01-15-obsidian-to-blog-sync/2024-01-15-obsidian-to-blog-sync_003.png)` â†’ `![alt](/assets/images/posts/image.png)`
- **è‡ªåŠ¨å¤åˆ¶å›¾ç‰‡**ï¼šå°†å¼•ç”¨çš„å›¾ç‰‡æ–‡ä»¶å¤åˆ¶åˆ°åšå®¢ä»“åº“çš„ `/assets/images/posts/` ç›®å½•
- **æ™ºèƒ½æŸ¥æ‰¾**ï¼šåœ¨æ•´ä¸ªObsidianä»“åº“ä¸­æœç´¢å¼•ç”¨çš„å›¾ç‰‡æ–‡ä»¶
- **æ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒå¸¸è§å›¾ç‰‡æ ¼å¼ï¼ˆpng, jpg, jpeg, gif, svgç­‰ï¼‰

## ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â””â”€â”€ sync-blog-posts.yml    # ä¸»å·¥ä½œæµæ–‡ä»¶
â”‚   â””â”€â”€ scripts/
â”‚       â””â”€â”€ process-blog-posts.js  # æ–‡ä»¶å¤„ç†è„šæœ¬
â”œâ”€â”€ LeonLi/                         # Obsidianç¬”è®°ç›®å½•
â””â”€â”€ README.md                       # æœ¬æ–‡ä»¶
```

## ç¤ºä¾‹

### Obsidianä¸­çš„æ–‡ä»¶
```markdown
# æˆ‘çš„æ–°åšå®¢æ–‡ç« 

è¿™æ˜¯ä¸€ç¯‡å…³äºæŠ€æœ¯çš„æ–‡ç« ã€‚

![ç¤ºä¾‹å›¾ç‰‡](/assets/images/posts/2024/2024-01-15-obsidian-to-blog-sync/2024-01-15-obsidian-to-blog-sync_004.png)

è¿˜å¯ä»¥ä½¿ç”¨Obsidiançš„wikié“¾æ¥æ ¼å¼ï¼š
![screenshot.jpg](/assets/images/posts/2024/2024-01-15-obsidian-to-blog-sync/2024-01-15-obsidian-to-blog-sync_002.jpg)



## å†…å®¹

æ–‡ç« çš„å…·ä½“å†…å®¹...
```

### è½¬æ¢åçš„Jekyllæ–‡ä»¶
```markdown
---
layout: default
title: "æˆ‘çš„æ–°åšå®¢æ–‡ç« "
date: 2024-01-15 12:00:00 +0800
categories:
---

# æˆ‘çš„æ–°åšå®¢æ–‡ç« 

è¿™æ˜¯ä¸€ç¯‡å…³äºæŠ€æœ¯çš„æ–‡ç« ã€‚

![ç¤ºä¾‹å›¾ç‰‡](/assets/images/posts/example.png)

è¿˜å¯ä»¥ä½¿ç”¨Obsidiançš„wikié“¾æ¥æ ¼å¼ï¼š
![screenshot.jpg](/assets/images/posts/screenshot.jpg)

## å†…å®¹

æ–‡ç« çš„å…·ä½“å†…å®¹...
```

### å›¾ç‰‡æ–‡ä»¶å¤„ç†
- åŸå§‹å›¾ç‰‡ï¼š`LeonLi/images/example.png`
- å¤åˆ¶åˆ°ï¼š`åšå®¢ä»“åº“/assets/images/posts/example.png`

## æ³¨æ„äº‹é¡¹

1. **æ ‡ç­¾ä½ç½®**ï¼š`` æ ‡ç­¾å¯ä»¥æ”¾åœ¨æ–‡ä»¶çš„ä»»æ„ä½ç½®
2. **æ–‡ä»¶ä¿ç•™**ï¼šåŸå§‹æ–‡ä»¶ä¼šä¿ç•™åœ¨Obsidianä¸­ï¼Œä¸ä¼šè¢«ç§»åŠ¨æˆ–åˆ é™¤
3. **é‡å¤å¤„ç†**ï¼šç›¸åŒçš„æ–‡ä»¶ä¼šè¢«é‡å¤å¤„ç†ï¼Œå»ºè®®åœ¨åšå®¢å‘å¸ƒåç§»é™¤æ ‡ç­¾
4. **æƒé™è¦æ±‚**ï¼šç¡®ä¿Personal Access Tokenæœ‰è¶³å¤Ÿçš„æƒé™è®¿é—®åšå®¢ä»“åº“

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å·¥ä½œæµå¤±è´¥**ï¼šæ£€æŸ¥GitHub Secretsæ˜¯å¦æ­£ç¡®é…ç½®
2. **æ–‡ä»¶æœªåŒæ­¥**ï¼šç¡®è®¤æ–‡ä»¶ä¸­åŒ…å«æ­£ç¡®çš„æ ‡ç­¾
3. **æƒé™é”™è¯¯**ï¼šéªŒè¯Personal Access Tokençš„æƒé™è®¾ç½®
4. **Gitå˜åŒ–æ£€æµ‹é—®é¢˜**ï¼šå¦‚æœæ–‡ä»¶å¤åˆ¶æˆåŠŸä½†æœªæäº¤ï¼Œå¯èƒ½æ˜¯Gitå˜åŒ–æ£€æµ‹é€»è¾‘é—®é¢˜

### å·²çŸ¥é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### Gitå˜åŒ–æ£€æµ‹é€»è¾‘ä¿®å¤

**é—®é¢˜æè¿°**ï¼šGitHub ActionæˆåŠŸå¤åˆ¶æ–‡ä»¶åˆ°åšå®¢ä»“åº“ï¼Œä½†GitæŠ¥å‘Š"No changes to commit"ï¼Œå¯¼è‡´æ–‡ä»¶æœªè¢«æäº¤ã€‚

**åŸå› åˆ†æ**ï¼šåŸå§‹å·¥ä½œæµä½¿ç”¨`git diff --quiet`æ£€æŸ¥å·¥ä½œç›®å½•å˜åŒ–ï¼Œä½†æ–°å¤åˆ¶çš„æ–‡ä»¶éœ€è¦å…ˆæ‰§è¡Œ`git add`æ‰èƒ½è¢«æ£€æµ‹åˆ°ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šå·²ä¿®å¤å·¥ä½œæµé€»è¾‘ï¼Œå°†`git add`æ“ä½œæå‰åˆ°`git diff --staged --quiet`æ£€æŸ¥ä¹‹å‰ï¼š

```yaml
# ä¿®å¤åçš„é€»è¾‘
- name: Commit and push changes
  run: |
    cd blog-repo
    git add _posts/ assets/images/posts/
    if ! git diff --staged --quiet; then
      git commit -m "Sync blog posts from Obsidian"
      git push
    else
      echo "No changes to commit"
    fi
```

### æŸ¥çœ‹æ—¥å¿—

åœ¨GitHubä»“åº“çš„Actionsæ ‡ç­¾é¡µä¸­å¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æ£€æŸ¥"Sync Blog Posts"å·¥ä½œæµçš„è¿è¡Œæ—¥å¿—
2. æŸ¥çœ‹"Process blog posts"æ­¥éª¤çš„è¾“å‡º
3. æ£€æŸ¥"Commit and push changes"æ­¥éª¤æ˜¯å¦æ­£ç¡®æ‰§è¡Œ
4. ä½¿ç”¨`gh run view <run-id>`å‘½ä»¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªå·¥ä½œæµï¼